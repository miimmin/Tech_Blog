# ì¸ë±ìŠ¤ì˜ ìžë£Œêµ¬ì¡°

## ðŸ£ ì¸ë±ìŠ¤ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ ì–´ë–¤ ìžë£Œêµ¬ì¡°ë¥¼ ì¨??

:::tip

í•´ì‹œí…Œì´ë¸”

B+Tree

:::

## ðŸ£Â í•´ì‹œ í…Œì´ë¸” (Hash Table)??

- í•´ì‹œ í…Œì´ë¸”ì€ (Key, Value)ë¡œ ë°ì´í„°ë¥¼ ì €ìž¥í•˜ëŠ” ìžë£Œêµ¬ì¡°
- `O(1)` ****ë¹ ë¥¸ ë°ì´í„° ê²€ìƒ‰ì´ í•„ìš”í•  ë•Œ ìœ ìš©
    - í•´ì‹œ í…Œì´ë¸”ì€ Keyê°’ì„ ì´ìš©í•´ ê³ ìœ í•œ indexë¥¼ ìƒì„±í•˜ì—¬ ê·¸ indexì— ì €ìž¥ëœ ê°’ì„ êº¼ë‚´ì˜¤ëŠ” êµ¬ì¡°ì´ë‹¤.

![ids0](./img/ids0.png)

### ðŸ¥š í•´ì‹œ í…Œì´ë¸” ë™ìž‘ë°©ì‹

- íŠ¹ì • ì»¬ëŸ¼ ì¸ë±ìŠ¤ ìƒì„±
  â†’ í•´ë‹¹ ì»¬ëŸ¼ì˜ ë°ì´í„°(key)ë“¤ì„ ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬í•˜ì—¬ ë³„ë„ì˜ ë©”ëª¨ë¦¬ ê³µê°„ì— ë°ì´í„°ì˜ ë¬¼ë¦¬ì  ì£¼ì†Œ(value)ì™€ í•¨ê»˜ (key,value)ë¡œ ì €ìž¥ë¨
  â†’ ì¿¼ë¦¬ì— "ì¸ë±ìŠ¤ ìƒì„± ì»¬ëŸ¼ì„ Where ì¡°ê±´ìœ¼ë¡œ ê±°ëŠ” ë“±"ì˜ ìž‘ì—…ì„ í•˜ë©´ `ì˜µí‹°ë§ˆì´ì €`ì—ì„œ íŒ ìƒì„±ëœ ì¸ë±ìŠ¤ ì‚¬ìš©
  â†’ ë¨¼ì € ì¸ë±ìŠ¤ì— ì €ìž¥ë˜ì–´ ìžˆëŠ” ë°ì´í„°ì˜ ë¬¼ë¦¬ì  ì£¼ì†Œë¡œ ê°€ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì‹ìœ¼ë¡œ ë™ìž‘ (ê·¸ë¦¼ì°¸ì¡°)

### ðŸ¥ší•´ì‹œ í…Œì´ë¸”ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì´ìœ 

- í•´ì‹œê°€ ë“±í˜¸(=) ì—°ì‚°ì—ë§Œ íŠ¹í™”ë˜ì—ˆë‹¤
- â†’ í•´ì‹œ í•¨ìˆ˜ëŠ” ê°’ì´ 1ì´ë¼ë„ ë‹¬ë¼ì§€ë©´ ì™„ì „ížˆ ë‹¤ë¥¸ í•´ì‹œ ê°’ì„ ìƒì„±í•˜ëŠ”ë°, ì´ëŸ¬í•œ íŠ¹ì„±ì— ì˜í•´Â ë¶€ë“±í˜¸ ì—°ì‚°(>, <)ì´ ìžì£¼ ì‚¬ìš©ë˜ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ê²€ìƒ‰ì„ ìœ„í•´ì„œëŠ” í•´ì‹œ í…Œì´ë¸”ì´ ì í•©í•˜ì§€ ì•Šë‹¤.
    - ex. "ë‚˜ëŠ”"ìœ¼ë¡œ ì‹œìž‘í•˜ëŠ” ëª¨ë“  ë°ì´í„°ë¥¼ ê²€ìƒ‰í•˜ê¸° ìœ„í•œ ì¿¼ë¦¬ë¬¸ì€ ì¸ë±ìŠ¤ì˜ í˜œíƒì„ ì „í˜€ ë°›ì§€ ëª»í•˜ê²Œ ëœë‹¤. ì´ëŸ¬í•œ ì´ìœ ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì˜ ì¸ë±ìŠ¤ì—ì„œëŠ” B+Treeê°€ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ëœë‹¤.

## ðŸ£Â B+ Tree

### ðŸ¥šÂ B-Tree

- B-TreeëŠ” íƒìƒ‰ ì„±ëŠ¥ì„ ë†’ì´ê¸° ìœ„í•´ ë†’ì´ë¥¼ ê· í˜• ìžˆê²Œ ìœ ì§€í•˜ëŠ” Balanced Tree

  ![ids1](./img/ids1.png)

1. ëª¨ë“  ë…¸ë“œê°€ (key, value) ë¥¼ í•¨ê»˜ ê°–ëŠ”ë‹¤ â†’ í’€ìŠ¤ìº”ì‹œ ëª¨ë“  ë…¸ë“œë¥¼ íƒìƒ‰í•´ì•¼í•œë‹¤
2. nodeì˜ keyì˜ ìˆ˜ê°€ kê°œë¼ë©´, ìžì‹ nodeì˜ ìˆ˜ëŠ” k+1ê°œì´ë‹¤.
3. nodeì˜ keyëŠ” ë°˜ë“œì‹œ ì •ë ¬ëœ ìƒíƒœì—¬ì•¼ í•œë‹¤.
4. ìžì‹ nodeë“¤ì˜ keyëŠ” í˜„ìž¬ nodeì˜ keyë¥¼ ê¸°ì¤€ìœ¼ë¡œ í¬ê¸° ìˆœìœ¼ë¡œ ë‚˜ë‰˜ê²Œ ëœë‹¤.
5. root nodeëŠ” í•­ìƒ 2ê°œ ì´ìƒì˜ ìžì‹ nodeë¥¼ ê°–ëŠ”ë‹¤. (root nodeê°€ leaf nodeì¸ ê²½ìš° ì œì™¸)
6. Mì°¨ íŠ¸ë¦¬ì¼ ë•Œ, root nodeì™€ leaf nodeë¥¼ ì œì™¸í•œ ëª¨ë“  nodeëŠ” ìµœì†ŒÂ âŒˆM2âŒ‰âŒˆM2âŒ‰, ìµœëŒ€Â MMê°œì˜ ì„œë¸Œ íŠ¸ë¦¬ë¥¼ ê°–ëŠ”ë‹¤.
7. ëª¨ë“  leaf nodeë“¤ì€ ê°™ì€ levelì— ìžˆì–´ì•¼ í•œë‹¤.

### ðŸ¥š B+Tree

- DBì˜ ì¸ë±ìŠ¤ë¥¼ ìœ„í•´Â B-Treeë¥¼ ê°œì„ ì‹œí‚¨ ìžë£Œêµ¬ì¡°
    - ë¦¬í”„ë…¸ë“œ(`ë°ì´í„°ë…¸ë“œ`)ë§Œ ì¸ë±ìŠ¤ì™€ í•¨ê»˜ ë°ì´í„°(Value)ë¥¼ ê°€ì§€ê³  ìžˆê³ , ë‚˜ë¨¸ì§€ ë…¸ë“œ(`ì¸ë±ìŠ¤ë…¸ë“œ`)ë“¤ì€ ë°ì´í„°ë¥¼ ìœ„í•œ ì¸ë±ìŠ¤(Key)ë§Œì„ ê°–ëŠ”ë‹¤.
    - ë¦¬í”„ë…¸ë“œë“¤ì€ LinkedListë¡œ ì—°ê²°ë˜ì–´ ìžˆë‹¤.
    - ë°ì´í„° ë…¸ë“œ í¬ê¸°ëŠ” ì¸ë±ìŠ¤ ë…¸ë“œì˜ í¬ê¸°ì™€ ê°™ì§€ ì•Šì•„ë„ ëœë‹¤.
- B+TreeëŠ” O(ð‘™ð‘œð‘”2ð‘›log2n)

  ![ids1](./img/ids2.png)
![ids3](./img/ids3.png)


- InnoDBì—ì„œì˜ B+TreeëŠ” ì¼ë°˜ì ì¸ êµ¬ì¡°ë³´ë‹¤ ë”ìš± ë³µìž¡í•˜ê²Œ êµ¬í˜„
    - InnoDBì—ì„œëŠ” ê°™ì€ ë ˆë²¨ì˜ ë…¸ë“œë“¤ë¼ë¦¬ëŠ” Linked Listê°€ ì•„ë‹Œ Double Linked Listë¡œ ì—°ê²°ë˜ì—ˆìœ¼ë©°, ìžì‹ ë…¸ë“œë“¤ì€ Single Linked Listë¡œ ì—°ê²°ë˜ì–´ ìžˆë‹¤.

##### ðŸ‘¾Â B+Tree ì˜ ìž¥ì 

1. leaf nodeë¥¼ ì œì™¸í•˜ê³  ë°ì´í„°ë¥¼ ì €ìž¥í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— `ë©”ëª¨ë¦¬ë¥¼ íš¨ìœ¨`

`í•˜ë‚˜ì˜ nodeì— ë” ë§Žì€ í¬ì¸í„°ë¥¼ ê°€ì§ˆ ìˆ˜ ìžˆê¸° ë•Œë¬¸ì— íŠ¸ë¦¬ì˜ ë†’ì´ê°€ ë” ë‚®ì•„ì§€ë¯€ë¡œ ê²€ìƒ‰ ì†ë„ë¥¼ í–¥ìƒ`

2. Full scanì„ í•˜ëŠ” ê²½ìš° `leaf nodeì—ë§Œ ë°ì´í„°ê°€ ì €ìž¥`ë˜ì–´ ìžˆê³ , `leaf nodeë¼ë¦¬ linked listë¡œ ì—°ê²°`ë˜ì–´ ìžˆê¸° ë•Œë¬¸ì— `ì„ í˜• ì‹œê°„ì´ ì†Œëª¨`ë¨

- ë¶€ë“±í˜¸ë¥¼ ì´ìš©í•œ ìˆœì°¨ê²€ìƒ‰ íš¨ìœ¨
- `ë°˜ë©´ B-TreeëŠ” ëª¨ë“  nodeë¥¼ í™•ì¸í•´ì•¼ í•¨`
- `ë¬¼ë¡  Best Caseì— ëŒ€í•´ B-TreeëŠ” ë¦¬í”„ë…¸ë“œê¹Œì§€ ê°€ì§€ ì•Šì•„ë„ íƒìƒ‰í•  ìˆ˜ ìžˆëŠ” BTreeì— ë¹„í•´ ë¬´ì¡°ê±´ ë¦¬í”„ë…¸ë“œê¹Œì§€ ê°€ì•¼í•œë‹¤ëŠ” ë‹¨ì `

â‡’ B+TreeëŠ” O(ð‘™ð‘œð‘”2ð‘›log2n) ì‹œê°„ë³µìž¡ë„ë¥¼ ê°–ì§€ë§Œ í•´ì‹œí…Œì´ë¸”ë³´ë‹¤ ì¸ë±ì‹±ì— ë”ìš± ì í•©í•œ ìžë£Œêµ¬ì¡°ìž„